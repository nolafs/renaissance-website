{{ "<!-- Block Testimonials -->" | safeHTML }}
{{ $testimonials := .Params.testimonials | default (slice) }}
<section>
    <div id="testimonial" class="grid-container full b-c-dark-gray block">
        <div class="icon-wrapper">
            <img src="/images/testimonial-icon.png" alt="Testimonial" width="100" height="114">
        </div>
        <div class="grid-container slick-slider">
            {{ range $testimonials }}
                {{ $testimonial := site.GetPage (printf "testimonials/%s" (urlize .testimonial)) }}
                {{ if $testimonial }}
                    <div class="slice-item">
                        <div class="grid-x gid-padding-x text-center align-center">
                            <div class="cell small-12 medium-10">
                                <ul class="no-bullet testimonial-item">
                                    <li>
                                        <div class="content">{{ $testimonial.Params.text | markdownify }}</div>
                                        <div class="profile">
                                            {{if $testimonial.Params.profile}}
                                            <div class="profile-img">
                                                {{ $resource := resources.Get $testimonial.Params.profile }}
                                                {{- if $resource -}}
                                                {{- with $resource.Fit "60x60 q50 webp" -}}
                                                <img class="image-round lazyload"  data-src="{{.RelPermalink}}" alt="profile">
                                                {{- end -}}
                                                {{- end -}}
                                            </div>
                                            {{end}}
                                            <div class="profile-name">
                                                {{$testimonial.Params.name}}
                                            </div>
                                            <div class="profile-position">
                                                {{$testimonial.Params.position}} of {{$testimonial.Params.company}}
                                            </div>
                                        </div>
                                    </li>
                                </ul>
                            </div>
                        </div>
                    </div>
                {{ else }}
                    <div class="slice-item">
                        <div class="grid-x gid-padding-x text-center align-center">
                            <div class="cell small-12 medium-10">
                                <p>Testimonial not found for {{ .testimonial }}</p>
                            </div>
                        </div>
                    </div>
                {{ end }}
            {{ end }}
        </div>
    </div>
</section>
{{ "<!-- Block Testimonials -->" | safeHTML }}
